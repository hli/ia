<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>README.rdoc</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            README.rdoc
        </h1>
        <ul class="files">
            <li>README.rdoc</li>
            <li>Last modified: Mon Apr 12 17:22:11 -0700 2010</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <h1>New Relic Infrastructure Agent</h1>
<p>
Gem for collecting memcached, disk, cpu and IO statistics. Collected stats
are sent to the New Relic RPM application.
</p>
<p>
Use this gem to collect statistics from a given host by running newrelic_ia
-a as a daemon. This will contribute System/* metrics to your RPM console
which can be viewed with custom dashboards.
</p>
<h2>Synopsis</h2>
<pre>
    newrelic_ia [ options ] aspect, aspect..

    aspect: one or more of 'iostat' or 'disk' or 'memcached' (more to come)

    -a, --all                        use all available aspects
    -v, --verbose                    debug output
    -q, --quiet                      quiet output
    -e, --environment=ENV            use ENV section in newrelic.yml
        --install                    create a default newrelic.yml
    -h, --help                       Show this help message.
</pre>
<h2>Requirements</h2>
<ul>
<li>New Relic Agent version 2.10.6 or later

</li>
<li>Gold Subscription for creating and viewing custom dashboards

</li>
</ul>
<h2>Install</h2>
<pre>
    sudo gem install newrelic_ia
</pre>
<p>
Once installed, run from the home directory of your Rails application, or
create a separate working directory and run
</p>
<pre>
    newrelic_ia --install
</pre>
<p>
to create a template newrelic.yml file you can use. Edit this file and
substitute your license key and app_name value.
</p>
<p>
specify memcached nodes in memcached-nodes.txt.
</p>
<h2>Credits</h2>
<p>
Special thanks to Chandra Patni and Tony Ford of IGN for the Memcached
sampler.
</p>
<h2>Memcached Details</h2>
<p>
Memcached statistics sampler collects subset of stats provided by memcached
daemon, once a minute. In addition it computes other stats dervied from
memcached stats. Also support stats derivatives over time to compute rate
etc. Specify Memcached nodes configuration in the newrelic.yml file.
</p>
<p>
Memcached stats are reported for each node and also sample reports
aggregated stats
</p>
<h3>Stats Detail</h3>
<pre>
    uptime                     Number of seconds this server has been running
    curr_items                 Current number of items stored by the server
    total_items                Total number of items stored by this server
                               ever since it started
    bytes                      Current number of bytes used by this server to store items
    curr_connections           Number of open connections
    total_connections          Total number of connections opened since
                               the server started running
    connection_structures      Number of connection structures allocated by the server
    cmd_get                    Cumulative number of retrieval requests
    cmd_set                    Cumulative number of storage requests
    get_hits                   Number of keys that have been requested and found present
    get_misses                 Number of items that have been requested and not found
    evictions                  Number of valid items removed from cache to free
                               memory for new items
    bytes_read                 Total number of bytes read by this server from network
    bytes_written              Total number of bytes sent by this server to network
    limit_maxbytes             Number of bytes this server is allowed to use for storage
    threads                    Number of worker threads requested
</pre>
<p>
Derived Stats (computed stats):
</p>
<pre>
    free_maxbytes              Number of free bytes this server has available for storage
</pre>
<p>
Stats Derivatives (time derivatives of stats):
</p>
<pre>
    hit_ratio                  Percent of keys that have been requested and found present
    miss_ratio                 Percent of keys that have been requested and found missing
    rpm                        Requests per minutes
    gpm                        Gets per minutes
    hpm                        Hits per minutes
    mpm                        Misses per minutes
    spm                        Sets per minutes
    fpm                        Flushes per minutes
    epm                        Evictions per minutes
</pre>
<h3>Sample Custom View</h3>
<p>
Liquid template for <a href="../classes/NewRelic.html">NewRelic</a> custom
dashboard:
</p>
<pre>
    &lt;div&gt;
        &lt;div style=&quot;float: left; width: 50%;&quot;&gt;
            {% line_chart value:average_value title:'Cache Miss Ratio' metric:'System/Memcached/all/miss_ratio' simple_tooltip:true label:segment_3 value_suffix:'%' %}
        &lt;/div&gt;
        &lt;div style=&quot;float: left; width: 50%;&quot;&gt;
            {% line_chart value:average_value title:'Cache Memory' regexp:'System/Memcached/all/(bytes|free_bytes|limit_maxbytes)' simple_tooltip:true label:segment_3 %}
        &lt;/div&gt;
        &lt;br style=&quot;clear: both&quot; /&gt;
    &lt;/div&gt;

    &lt;div style=&quot;padding-top: 20px&quot;&gt;&amp;nbsp;&lt;/div&gt;

    &lt;div&gt;
        &lt;div style=&quot;float: left; width: 50%;&quot;&gt;
            {% line_chart value:average_value title:'Cache Gets &amp; Sets' regexp:'System/Memcached/all/(gpm|spm)' simple_tooltip:true label:segment_3 %}
        &lt;/div&gt;
        &lt;div style=&quot;float: left; width: 50%;&quot;&gt;
            {% line_chart value:average_value title:'Cache Misses, Flushes, &amp; Evictions' regexp:'System/Memcached/all/(mpm|epm|fpm)' simple_tooltip:true label:segment_3 %}
        &lt;/div&gt;
        &lt;br style=&quot;clear: both&quot; /&gt;
    &lt;/div&gt;

    &lt;div style=&quot;padding-top: 20px&quot;&gt;&amp;nbsp;&lt;/div&gt;

    &lt;div&gt;
        &lt;div style=&quot;float: left; width: 50%;&quot;&gt;
        {% line_chart value:average_value title:'Active Connections' metric:'System/Memcached/all/curr_connections' simple_tooltip:true hide_legend:true %}
        &lt;/div&gt;
        &lt;div style=&quot;float: left; width: 50%;&quot;&gt;
        {% line_chart value:average_value title:'Cache Objects' metric:'System/Memcached/all/curr_items' simple_tooltip:true hide_legend:true %}
        &lt;/div&gt;
        &lt;br style=&quot;clear: both&quot; /&gt;
    &lt;/div&gt;
</pre>

    </div>
    

    

    
    

    
    

    

    

    

    

    

    
</div>
    </div>
  </body>
</html>